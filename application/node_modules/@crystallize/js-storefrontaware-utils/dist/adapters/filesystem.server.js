"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.createFilesystemAdapter = void 0;
const promises_1 = __importDefault(require("fs/promises"));
const createFilesystemAdapter = (filename) => {
    return {
        config: async (withSecrets) => {
            const data = await promises_1.default.readFile(filename, { encoding: 'utf8' });
            const unfilteredSecrets = JSON.parse(data);
            if (withSecrets) {
                return unfilteredSecrets;
            }
            return {
                ...unfilteredSecrets,
                configuration: {
                    ...unfilteredSecrets.configuration,
                    CRYSTALLIZE_ACCESS_TOKEN_ID: '',
                    CRYSTALLIZE_ACCESS_TOKEN_SECRET: '',
                },
            };
        },
    };
};
exports.createFilesystemAdapter = createFilesystemAdapter;
//# sourceMappingURL=filesystem.server.js.map